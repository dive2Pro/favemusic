import { normalize, schema } from 'normalizr'
import {   userSchema } from '../../src/schemas/user'

const DATA = [
  { "kind": "track", "id": 300969290, "created_at": "2017/01/04 23:36:35 +0000", "user_id": 2085975, "duration": 2520973, "commentable": false, "state": "finished", "original_content_size": 61003691, "last_modified": "2017/01/04 23:36:47 +0000", "sharing": "public", "tag_list": "\"Sitcom Geeks\" WGGB \"James Cary\" \"Dave Cohen\" \"Abigail Burdess\" \"Kay Stonham\"", "permalink": "sitcom-geeks-episode-39", "streamable": true, "embeddable_by": "all", "downloadable": true, "purchase_url": null, "label_id": null, "purchase_title": null, "genre": "Comedy", "title": "Sitcom Geeks - Episode 39 - Best TV Sitcoms of 2016", "description": "James Cary and Dave Cohen are joined by Abigail Burdess and Kay Stonham to talk about the Writers' Guild of Great Britain Awards, particularly the shows nominated for Best TV Sitcom (People Just Do Nothing, Plebs, Fleabag). They also talk about sitcom trends, story arcs and what even qualifies as a sitcom these days.\n\nMore episodes:\nhttps://www.comedy.co.uk/podcasts/sitcom_geeks/", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/300969290", "user": { "id": 2085975, "kind": "user", "permalink": "britishcomedyguide", "username": "British Comedy Guide", "last_modified": "2016/12/30 18:41:18 +0000", "uri": "https://api.soundcloud.com/users/2085975", "permalink_url": "http://soundcloud.com/britishcomedyguide", "avatar_url": "https://i1.sndcdn.com/avatars-000198523804-7bmpe3-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/300969290/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/britishcomedyguide/sitcom-geeks-episode-39", "artwork_url": "https://i1.sndcdn.com/artworks-000201260683-1ed260-large.jpg", "waveform_url": "https://w1.sndcdn.com/JXhhqZ0l1l3q_m.png", "stream_url": "https://api.soundcloud.com/tracks/300969290/stream", "download_url": "https://api.soundcloud.com/tracks/300969290/download" }, { "kind": "track", "id": 294341921, "created_at": "2016/11/23 01:09:12 +0000", "user_id": 24298771, "duration": 198758, "commentable": true, "state": "finished", "original_content_size": 7949923, "last_modified": "2017/01/05 04:33:33 +0000", "sharing": "public", "tag_list": "", "permalink": "save-my-soul-2", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": "https://itunes.apple.com/us/album/final-moments-of-forever/id1179204879", "label_id": null, "purchase_title": "Buy", "genre": "Hip Hop", "title": "Save My Soul", "description": "Produced by Buckwild of DITC & J. Rob", "label_name": "Sony Music Entertainment", "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": 2016, "release_month": 12, "release_day": 2, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/294341921", "user": { "id": 24298771, "kind": "user", "permalink": "mattcitronmtz", "username": "Matt Citron//MTZ", "last_modified": "2017/01/05 04:51:39 +0000", "uri": "https://api.soundcloud.com/users/24298771", "permalink_url": "http://soundcloud.com/mattcitronmtz", "avatar_url": "https://i1.sndcdn.com/avatars-000277751873-obqzfm-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/294341921/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/mattcitronmtz/save-my-soul-2", "artwork_url": "https://i1.sndcdn.com/artworks-edq5Io8EPoyD-0-large.jpg", "waveform_url": "https://w1.sndcdn.com/QqhbqeNUuW0e_m.png", "stream_url": "https://api.soundcloud.com/tracks/294341921/stream", "playback_count": 1113, "download_count": 0, "favoritings_count": 4878, "comment_count": 75 }, { "kind": "track", "id": 283206441, "created_at": "2016/09/16 16:05:31 +0000", "user_id": 4091150, "duration": 201683, "commentable": true, "state": "finished", "original_content_size": 35562284, "last_modified": "2017/01/06 09:35:39 +0000", "sharing": "public", "tag_list": "Vanic ft Katy Tiz Samurai \"Katy Tiz\"", "permalink": "vanic-katy-tiz-samurai", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": "http://flyt.it/VanicSamuraiSpotify", "label_id": null, "purchase_title": "SPOTIFY", "genre": "Vanic", "title": "Vanic Ft. Katy Tiz - Samurai", "description": "Worked really hard on this track. \nFeel free to click the [↻ Repost] button!\n\n|| NOW ON TOUR: WWW.DJVANIC.COM\nSpotify: http://flyt.it/VanicSamuraiSpotify\niTunes: http://flyt.it/VanicSamuraiITunes\nApple Music: http://flyt.it/VanicSamuraiAppleMusic", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "wav", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/283206441", "user": { "id": 4091150, "kind": "user", "permalink": "djvanic", "username": "VANIC Official", "last_modified": "2016/12/25 07:34:42 +0000", "uri": "https://api.soundcloud.com/users/4091150", "permalink_url": "http://soundcloud.com/djvanic", "avatar_url": "https://i1.sndcdn.com/avatars-000214490479-vd68bw-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/283206441/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/djvanic/vanic-katy-tiz-samurai", "artwork_url": "https://i1.sndcdn.com/artworks-000195948763-ezn3ob-large.jpg", "waveform_url": "https://w1.sndcdn.com/EMocwTK82wzA_m.png", "stream_url": "https://api.soundcloud.com/tracks/283206441/stream", "playback_count": 161735, "download_count": 0, "favoritings_count": 63409, "comment_count": 536 }, { "kind": "track", "id": 298191116, "created_at": "2016/12/16 11:09:10 +0000", "user_id": 749872, "duration": 390461, "commentable": true, "state": "finished", "original_content_size": 16168546, "last_modified": "2016/12/16 11:14:17 +0000", "sharing": "public", "tag_list": "Christian meditation \"Jesus #Christ\"", "permalink": "barka", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": null, "label_id": null, "purchase_title": null, "genre": "World", "title": "Barka", "description": "We hope this song will bring pleasure and inspiration to all the listeners.\nThank you for all of your support. We'll appreciate if you like and share with others.\nJaya Jaya Lord Jesus Christ!\nWith Love - 4Jivas", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/298191116", "user": { "id": 749872, "kind": "user", "permalink": "4jivas", "username": "4Jivas", "last_modified": "2016/11/16 19:34:11 +0000", "uri": "https://api.soundcloud.com/users/749872", "permalink_url": "http://soundcloud.com/4jivas", "avatar_url": "https://i1.sndcdn.com/avatars-000001073109-sceibn-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/298191116/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/4jivas/barka", "artwork_url": "https://i1.sndcdn.com/artworks-000198717931-osn3xt-large.jpg", "waveform_url": "https://w1.sndcdn.com/Djl5EhbbDkEy_m.png", "stream_url": "https://api.soundcloud.com/tracks/298191116/stream", "playback_count": 28, "download_count": 0, "favoritings_count": 135, "comment_count": 1 }, { "kind": "track", "id": 290574291, "created_at": "2016/10/29 20:00:44 +0000", "user_id": 35802527, "duration": 205340, "commentable": true, "state": "finished", "original_content_size": 54378952, "last_modified": "2017/01/06 09:33:08 +0000", "sharing": "public", "tag_list": "", "permalink": "modiwo-happy-people", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": null, "label_id": null, "purchase_title": null, "genre": "Pop", "title": "Happy People", "description": "", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "wav", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/290574291", "user": { "id": 35802527, "kind": "user", "permalink": "modiwo", "username": "Modiwo", "last_modified": "2016/10/29 20:23:23 +0000", "uri": "https://api.soundcloud.com/users/35802527", "permalink_url": "http://soundcloud.com/modiwo", "avatar_url": "https://i1.sndcdn.com/avatars-000035046610-foint2-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/290574291/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/modiwo/modiwo-happy-people", "artwork_url": "https://i1.sndcdn.com/artworks-000191234285-5628no-large.jpg", "waveform_url": "https://w1.sndcdn.com/GZxnriAA6vNH_m.png", "stream_url": "https://api.soundcloud.com/tracks/290574291/stream", "playback_count": 311, "download_count": 0, "favoritings_count": 1482, "comment_count": 35 }, { "kind": "track", "id": 175480754, "created_at": "2014/11/05 15:56:12 +0000", "user_id": 66374689, "duration": 258191, "commentable": true, "state": "finished", "original_content_size": 8364042, "last_modified": "2017/01/04 22:02:43 +0000", "sharing": "public", "tag_list": "folk music blues acoustic indie bluegrass silkscreen nowplaying pop", "permalink": "4-yasoda-nandana-1", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": null, "label_id": null, "purchase_title": null, "genre": "Ambient", "title": "4 - Yasoda-Nandana - Meditation - Get our NEW Music app & give it 5 stars! (Click HERE to download)", "description": "Spiritual Sound — Meditation of the Heart - \nPlease get our NEW Music app & give it a 5 star rating! (Click to download)  By giving it a 5 star you help us climb to the top of Google Play! Thank you!  \nThe music app contains the best music from this channel in one handy player package.  Must be experienced!   DOWNLOAD HERE --> http://bit.ly/1uMCfZl", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/175480754", "user": { "id": 66374689, "kind": "user", "permalink": "relaxmeditation", "username": "Relax-Meditation Music :)", "last_modified": "2016/08/25 08:53:26 +0000", "uri": "https://api.soundcloud.com/users/66374689", "permalink_url": "http://soundcloud.com/relaxmeditation", "avatar_url": "https://i1.sndcdn.com/avatars-000060289337-arbqox-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/175480754/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/relaxmeditation/4-yasoda-nandana-1", "artwork_url": "https://i1.sndcdn.com/artworks-000096205917-sxq0ol-large.jpg", "waveform_url": "https://w1.sndcdn.com/7W7CIvBtnpnV_m.png", "stream_url": "https://api.soundcloud.com/tracks/175480754/stream", "playback_count": 1136182, "download_count": 24770, "favoritings_count": 72744, "comment_count": 1361 }, { "kind": "track", "id": 268436486, "created_at": "2016/06/10 10:17:06 +0000", "user_id": 152468368, "duration": 434038, "commentable": true, "state": "finished", "original_content_size": 6944108, "last_modified": "2017/01/06 09:35:38 +0000", "sharing": "public", "tag_list": "\"Yoga Music\" \"Pop Music\" \"Singer Songwriter\"", "permalink": "alive-forever", "streamable": true, "embeddable_by": "all", "downloadable": false, "purchase_url": "https://www.reverbnation.com/wailana", "label_id": null, "purchase_title": "⚡️ REVERBNATION ⚡️", "genre": "Folk & Singer-Songwriter", "title": "'Alive Forever' (Aham Brahmasmi) - Lyrics in description", "description": "Lyrics: ALIVE FOREVER (Aham Brahmasmi) - By Wai Lana\n \nLooking in the mirror every day\nI frown I stress and I worry\nOh time you have no mercy\nYou wilt my body, you sadden my heart\n\nNothing can make me young again\nMore wrinkles lining my face\nHair turning grey \nBut the soul remains un-changed\n\nAham Bramasmi\nAham Bramasmi\nAham Bramasmi\n\nDon’t be afraid of getting old\nThe true self is ever youthful\nAnd everlasting\n\nKnowing I am not the body\nI am at ease\nPraise for my looks I do not need\n\nLiving my life with true meaning\nKnowing that I am spirit soul\nI glide through life with inner peace\nIn time my body will cease to be\n\nMother earth herself will also age\nThere is no cause for worry\nEternal we hold pure love in our hearts\n\nSo happy to know life has no end\nCalm is my mind and at peace\nMy Lord's love shines everywhere\nAlive forever I the soul will be\n\nAham Bramasmi\nAham Bramasmi\nAham Bramasmi\n\nAham Bramasmi\nAham Bramasmi\nAham Bramasmi\nAham Bramasmi\n\nAham Bramasmi\n\n-----\n\n\"Two thousand years ago, Emperor Qin became famous for building the Great Wall of China, using hundreds of thousands of men to construct it. \n\nHe so much enjoyed ruling over his kingdom, with all the wealth and power, that he couldn’t bear the thought of one day having to leave it all behind. For many, many years he embarked on epic quests, engaging countless servants in the search for an elixir that would give him eternal life, so he could live forever in his kingdom. \n\nWhether in ancient or modern times, rich or poor, educated or illiterate, no matter what our race or gender, none of us want to cease existing. We all have in common this natural desire to be alive forever.\n\nThat is because we are each an eternal spiritual being, just temporarily living in this material body. \n\nThis secret of our true identity is taught in the Bhagavad-gita: \n“For the soul there is never birth nor death. Nor, having once been, does he ever cease to be. He is unborn, eternal, ever-existing, undying and primeval. His is not slain when the body is slain.”\n\n“Alive Forever” expresses this ancient yoga wisdom of “Aham Brahmasmi”—I am an eternal spiritual being, I am not my body, and I will not die when my body dies. \n\nUnderstanding this profound truth, we can live in peace and happiness, \nknowing that our true self is ever-youthful and ever-lasting. \n\nSo there is no need to be sad as our body ages, rather we should feel very blessed to know this priceless jewel of wisdom. \"", "label_name": "Wai Lana Productions LLC", "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": 2016, "release_month": 6, "release_day": 21, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/268436486", "user": { "id": 152468368, "kind": "user", "permalink": "wai-lana", "username": "300+ Wai Lana Music Soundtracks", "last_modified": "2016/10/30 12:03:03 +0000", "uri": "https://api.soundcloud.com/users/152468368", "permalink_url": "http://soundcloud.com/wai-lana", "avatar_url": "https://i1.sndcdn.com/avatars-000234824272-me1a7b-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/268436486/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/wai-lana/alive-forever", "artwork_url": "https://i1.sndcdn.com/artworks-000166772504-0zfj95-large.jpg", "waveform_url": "https://w1.sndcdn.com/Jf9gFm5Uu2dr_m.png", "stream_url": "https://api.soundcloud.com/tracks/268436486/stream", "playback_count": 9151, "download_count": 0, "favoritings_count": 20105, "comment_count": 230 }, { "kind": "track", "id": 226771076, "created_at": "2015/10/03 20:14:27 +0000", "user_id": 174745319, "duration": 8702751, "commentable": true, "state": "finished", "original_content_size": 348086771, "last_modified": "2016/12/09 04:59:56 +0000", "sharing": "public", "tag_list": "hernancattaneo sunrise \"burning man\" \"burning man 2015\" burningman burningman2015 playa Deep deephouse \"Tech House\"", "permalink": "hernan-cattaneo-white-ocean-burning-man-2015-sunrise-set", "streamable": true, "embeddable_by": "all", "downloadable": true, "purchase_url": null, "label_id": null, "purchase_title": null, "genre": "whiteocean", "title": "Hernan Cattaneo - White Ocean - Burning Man 2015 (Sunrise set)", "description": "Burning Man is by far the most interesting festival in the world. Not a music festival, but an arts and expression celebration. Once again it was a privilege to spend time at White Ocean and share the music i love with so many burners from all over the world....", "label_name": null, "release": null, "track_type": null, "key_signature": null, "isrc": null, "video_url": null, "bpm": null, "release_year": null, "release_month": null, "release_day": null, "original_format": "mp3", "license": "all-rights-reserved", "uri": "https://api.soundcloud.com/tracks/226771076", "user": { "id": 174745319, "kind": "user", "permalink": "whiteoceanofficial", "username": "WHITE OCEAN (official)", "last_modified": "2017/01/01 12:22:39 +0000", "uri": "https://api.soundcloud.com/users/174745319", "permalink_url": "http://soundcloud.com/whiteoceanofficial", "avatar_url": "https://i1.sndcdn.com/avatars-000269443473-c1cxdh-large.jpg" }, "attachments_uri": "https://api.soundcloud.com/tracks/226771076/attachments", "user_playback_count": 1, "user_favorite": true, "permalink_url": "http://soundcloud.com/whiteoceanofficial/hernan-cattaneo-white-ocean-burning-man-2015-sunrise-set", "artwork_url": "https://i1.sndcdn.com/artworks-000131552663-85fy71-large.jpg", "waveform_url": "https://w1.sndcdn.com/ffCdjYqHfINm_m.png", "stream_url": "https://api.soundcloud.com/tracks/226771076/stream", "download_url": "https://api.soundcloud.com/tracks/226771076/download", "playback_count": 263508, "download_count": 24627, "favoritings_count": 19513, "comment_count": 1275 }]

const trackSchema = new schema.Entity('songs');
const user = new schema.Entity('users');
const origin = new schema.Entity('origins')
origin.define({
  user
})
trackSchema.define({
  origin,
  user: userSchema
})
const showData = [
  { origin: {}, type: 'track', id: 332211 },
  { origin: {}, type: 'track', id: 332222 },
  { origin: {}, type: 'track', id: 332233 },
]

function wrapInOrigin(activity: ActivityType) {
  return {
    origin: activity
    , type: 'track'
    , id: activity.id
  }
}
describe("track test", () => {
  const normalizedresult = normalize(DATA.map(wrapInOrigin), new schema.Array(trackSchema))
  it('', (done) => {
    console.log(normalizedresult)
    const origins = normalizedresult.entities.origins
    const id = (normalizedresult.entities.songs[300969290].origin);
    console.log(origins[id]);
    // assert.sameDeepMembers(normalizedresult.result, [300969290,
    //   294341921,
    //   283206441,
    //   298191116,
    //   290574291,
    //   175480754,
    //   268436486,
    //   226771076], 'same result ids')
    done()
  })
})
